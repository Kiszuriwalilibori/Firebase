{"version":3,"sources":["components/PersonsTable/PersonsTableContent.jsx"],"names":["PersonsTableContent","connect","state","items","user","dispatch","showError","data","props","history","useHistory","length","removeItem","e","ref","currentTarget","dataset","item_firebase_ref","itemRef","firebase","database","remove","err","message","push","ROUTES","map","row","index","key","middleAligned","circle","emailCell","displayName","button","onClick","data-item_firebase_ref","iconTimes","propTypes","PropTypes","arrayOf","array","onDelete","func"],"mappings":"uGAAA,yFAwEMA,EAAsBC,aATJ,SAACC,GAAD,MAAY,CAClCC,MAAOD,EAAMC,MACbC,KAAMF,EAAME,SAGa,SAACC,GAAD,MAAe,CACxCC,UAAW,SAACC,GAAD,OAAUF,EAASC,YAAUC,QAGdN,EA/DC,SAACO,GAAW,IAC/BL,EAA2BK,EAA3BL,MAAOC,EAAoBI,EAApBJ,KAAME,EAAcE,EAAdF,UACfG,EAAUC,cAChB,IAAKP,GAAyB,GAAhBA,EAAMQ,OAClB,OAAO,KAGT,IAAMC,EAAa,SAACC,GAClB,IAAMC,EAAMD,EAAEE,cAAcC,QAAQC,kBAC9BC,EAAUC,IAASC,WAAWN,IAApB,iBAAkCA,IAClD,GAAII,EACF,IACEA,EAAQG,SACR,MAAOC,GACPhB,EAAUgB,EAAIC,SACdd,EAAQe,KAAKC,UAGfnB,EACE,4JAEFG,EAAQe,KAAKC,MAIjB,OACE,+BACGtB,EAAMuB,KAAI,SAACC,EAAKC,GAAN,OACT,wBAAIC,IAAKD,GACP,kBAAC,IAAME,cAAP,CAAqBD,IAAKD,GACxB,kBAAC,IAAMG,OAAP,KAAeH,EAAQ,IAEzB,kBAAC,IAAME,cAAP,CAAqBD,IAAKD,EAAQD,EAAI,IACnCA,EAAI,IAEP,kBAAC,IAAMG,cAAP,CAAqBD,IAAKD,EAAQD,EAAI,IACpC,kBAAC,IAAMK,UAAP,KACE,8BAAOL,EAAI,IACVvB,GAAQA,EAAK6B,cAAgBN,EAAI,IAChC,kBAAC,IAAMO,OAAP,CACEC,QAASvB,EACTwB,yBAAwBT,EAAI,IAE5B,kBAAC,IAAMU,UAAP,OAED,cAuBFrC,YAEfA,EAAoBsC,UAAY,CAC9BnC,MAAOoC,IAAUC,QAAQD,IAAUE,OACnCC,SAAUH,IAAUI","file":"static/js/15.bdca658a.chunk.js","sourcesContent":["import PropTypes from \"prop-types\";\nimport firebase from \"../../js/FUNCTIONS/firebase\";\nimport React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { showError } from \"../../js/ACTIONS/actions\";\nimport { rows_ } from \"../../styles/style\";\nimport * as ROUTES from \"../../js/ROUTES/routes\";\n\nconst _PersonsTableContent = (props) => {\n  const { items, user, showError } = props;\n  const history = useHistory();\n  if (!items || items.length == 0) {\n    return null;\n  }\n\n  const removeItem = (e) => {\n    const ref = e.currentTarget.dataset.item_firebase_ref;\n    const itemRef = firebase.database().ref(`/items/${ref}`);\n    if (itemRef) {\n      try {\n        itemRef.remove();\n      } catch (err) {\n        showError(err.message);\n        history.push(ROUTES.ERROR);\n      }\n    } else {\n      showError(\n        \"Podczas próby usunięcia użytkownika pojawił się problem. Wszystko wskazuje, że tego użytkownika nie ma już w bazie\"\n      );\n      history.push(ROUTES.ERROR);\n    }\n  };\n\n  return (\n    <tbody>\n      {items.map((row, index) => (\n        <tr key={index}>\n          <rows_.middleAligned key={index}>\n            <rows_.circle>{index + 1}</rows_.circle>\n          </rows_.middleAligned>\n          <rows_.middleAligned key={index + row[1]}>\n            {row[1]}\n          </rows_.middleAligned>\n          <rows_.middleAligned key={index + row[2]}>\n            <rows_.emailCell>\n              <span>{row[2]}</span>\n              {user && user.displayName === row[3] && (\n                <rows_.button\n                  onClick={removeItem}\n                  data-item_firebase_ref={row[0]}\n                >\n                  <rows_.iconTimes />\n                </rows_.button>\n              )}{\" \"}\n            </rows_.emailCell>\n          </rows_.middleAligned>\n        </tr>\n      ))}\n    </tbody>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  items: state.items,\n  user: state.user,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  showError: (data) => dispatch(showError(data)),\n});\n\nconst PersonsTableContent = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(_PersonsTableContent);\n\nexport default PersonsTableContent;\n\nPersonsTableContent.propTypes = {\n  items: PropTypes.arrayOf(PropTypes.array),\n  onDelete: PropTypes.func,\n};\n"],"sourceRoot":""}