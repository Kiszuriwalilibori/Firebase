{"version":3,"file":"static/js/391.762c4caf.chunk.js","mappings":"+OAmBA,MA6DA,GAAeA,EAAAA,EAAAA,IAAQ,MAJKC,IAAD,CACvBC,UAAYC,GAAoBF,GAASC,EAAAA,EAAAA,IAAUC,OAGvD,EA7D0BC,IACtB,MAAM,UAAEF,GAAcE,EAChBC,EAAWC,EAAAA,WAAiBC,EAAAA,GAC5BC,GAAWC,EAAAA,EAAAA,MACXC,GAAUC,EAAAA,EAAAA,IAAYC,EAAAA,IAE5B,IAAKF,GAA8B,IAAnBA,EAAQG,OACpB,OAAO,KAuBX,OACI,2BACKH,EAAQI,KAAI,CAACC,EAAQC,KAClB,2BACI,SAAC,KAAD,WACI,SAAC,KAAD,UAASA,EAAQ,KADHC,QAGlB,SAAC,KAAD,UAA2BF,EAAOG,MAAhBD,QAClB,SAAC,KAAD,WACI,UAAC,KAAD,YACI,0BAAOF,EAAOI,QACbJ,EAAOK,eACJ,SAAC,KAAD,CACIC,QAASN,EAAOK,aAAe,IAjC3CE,KAChB,MAAMC,EAAUlB,EAASmB,SAASC,IAAK,UAASH,KAChD,GAAIC,EACA,IACIA,EAAQG,QACX,CAAC,MAAOC,GAELzB,EAAU,CAAE0B,aADFD,EACkBE,QAASC,SAAS,IAC9CtB,EAASuB,EAAAA,GACZ,MAED7B,EAAU,CACN0B,aACI,2JACJE,SAAS,IAEbtB,EAASuB,EAAAA,GACZ,EAgBgEC,CAAWjB,EAAOkB,aAAe,OACtE,aAAY,8BAAgClB,EAAOI,MAFvD,UAII,SAAC,KAAD,MAEL,QAVOF,SALbA,UAHrB,G,WCdJiB,EAAOC,QA9BP,WACE,MAAMC,EAAY,CAChB,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,KAEF,IAAInB,EAAO,GACX,IAAK,IAAIoB,EAAI,EAAGA,EAAI,GAAIA,IAEpBpB,EAAKoB,GADG,IAANA,GAAiB,KAANA,GAAkB,KAANA,GAAkB,KAANA,EAC3B,IAEAD,EAAUE,KAAKC,MAAMD,KAAKE,SAAWJ,EAAUvB,OAAS,IAGtE,OAAOI,EAAKwB,KAAK,GAClB,C","sources":["pages/PersonsPage/parts/PersonsTable/Body.tsx","../node_modules/react-uuid/uuid.js"],"sourcesContent":["import * as React from \"react\";\r\nimport uuid from \"react-uuid\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { connect, useSelector } from \"react-redux\";\r\n\r\nimport * as ROUTES from \"js/routes\";\r\n\r\nimport { showError } from \"js/redux/actions\";\r\nimport { FirebaseContext } from \"contexts/firebaseContext\";\r\nimport { ErrorType, FirebaseError } from \"types\";\r\nimport { AppDispatch } from \"components/AppProvider\";\r\nimport { selectPersons } from \"js/redux/selectors\";\r\nimport { Button, ClearIcon, RegularCell, Circle, EmailCell } from \"./styles\";\r\n\r\ninterface Props {\r\n    showError: (data: ErrorType) => void;\r\n}\r\n\r\nconst PersonsTableBody = (props: Props) => {\r\n    const { showError } = props;\r\n    const firebase = React.useContext(FirebaseContext);\r\n    const navigate = useNavigate();\r\n    const persons = useSelector(selectPersons);\r\n\r\n    if (!persons || persons.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    const removeItem = (str: string) => {\r\n        const itemRef = firebase.database.ref(`/items/${str}`);\r\n        if (itemRef) {\r\n            try {\r\n                itemRef.remove();\r\n            } catch (err: any) {\r\n                const e = err as FirebaseError;\r\n                showError({ errorMessage: e.message, isError: true });\r\n                navigate(ROUTES.ERROR);\r\n            }\r\n        } else {\r\n            showError({\r\n                errorMessage:\r\n                    \"Podczas próby usunięcia użytkownika pojawił się problem. Wszystko wskazuje, że tego użytkownika nie ma już w bazie\",\r\n                isError: true,\r\n            });\r\n            navigate(ROUTES.ERROR);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <tbody>\r\n            {persons.map((person, index) => (\r\n                <tr key={uuid()}>\r\n                    <RegularCell key={uuid()}>\r\n                        <Circle>{index + 1}</Circle>\r\n                    </RegularCell>\r\n                    <RegularCell key={uuid()}>{person.name}</RegularCell>\r\n                    <RegularCell key={uuid()}>\r\n                        <EmailCell>\r\n                            <span>{person.email}</span>\r\n                            {person.isAuthorised && (\r\n                                <Button\r\n                                    onClick={person.isAuthorised ? () => removeItem(person.firebaseRef) : () => {}}\r\n                                    aria-label={\"remove user having e-mail  \" + person.email}\r\n                                >\r\n                                    <ClearIcon />\r\n                                </Button>\r\n                            )}{\" \"}\r\n                        </EmailCell>\r\n                    </RegularCell>\r\n                </tr>\r\n            ))}\r\n        </tbody>\r\n    );\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: AppDispatch) => ({\r\n    showError: (data: ErrorType) => dispatch(showError(data)),\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(PersonsTableBody);\r\n","/**\nA function that returns a universally unique identifier (uuid).  \nexample: 1b83fd69-abe7-468c-bea1-306a8aa1c81d\n@returns `string` : 32 character uuid (see example)\n*/\nfunction uuid() {\n  const hashTable = [\n    'a',\n    'b',\n    'c',\n    'd',\n    'e',\n    'f',\n    '0',\n    '1',\n    '2',\n    '3',\n    '4',\n    '5',\n    '6',\n    '7',\n    '8',\n    '9',\n  ];\n  let uuid = [];\n  for (let i = 0; i < 35; i++) {\n    if (i === 7 || i === 12 || i === 17 || i === 22) {\n      uuid[i] = '-';\n    } else {\n      uuid[i] = hashTable[Math.floor(Math.random() * hashTable.length - 1)];\n    }\n  }\n  return uuid.join('');\n}\n\nmodule.exports = uuid;\n"],"names":["connect","dispatch","showError","data","props","firebase","React","FirebaseContext","navigate","useNavigate","persons","useSelector","selectPersons","length","map","person","index","uuid","name","email","isAuthorised","onClick","str","itemRef","database","ref","remove","err","errorMessage","message","isError","ROUTES","removeItem","firebaseRef","module","exports","hashTable","i","Math","floor","random","join"],"sourceRoot":""}