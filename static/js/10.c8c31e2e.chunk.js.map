{"version":3,"sources":["styles/style.js","js/REDUX/THUNKS/submitFigure.js","components/PersonsTable/AddPersonButton.jsx","components/PersonsTable/AddPersonForm.jsx","components/PersonsTable/PersonsTableHeader.jsx","components/App.jsx","js/REDUX/THUNKS/loadData.js"],"names":["message","styled","div","btn","button","btn_dis","Application","App","tableWrapper","main","table","Logo","wrapper","header","page","a","attrs","props","href","target","rel","Overhead","successMessage","dangerMessage","btn_disabled","btnText","span","iconCheck","className","iconCross","iconLimit","Input","input","resetWrapper","innerWrapper","inputWrapper","outerWrapper","form","Header","thead","sectionStyle","th","section","children","Rows","emailCell","middleAligned","td","middleAlignedTop","circle","type","createGlobalStyle","submitFigure","notDuplicate","redirect","data","firebase","dispatch","getState","itemsRef","push","error","showError","toggleSubmit","setTimeout","hideAddedUserMessage","submitUser","showWarning","AddPersonButton","isDisabled","id","disabled","connect","state","submitDisabled","AddPersonForm","useRef","user","history","useContext","FirebaseContext","React","useMemo","ROUTES","loading","home","useEffect","current","focus","values","handleSubmit","getFieldProps","handleReset","submitCount","errors","useFormik","initialValues","personEmail","personName","validationSchema","Yup","shape","email","required","min","matches","onSubmit","orderByChild","equalTo","once","snapshot","isNotDuplicate","exists","name","displayName","minLength","maxLength","pattern","placeholder","ref","onClick","JSON","stringify","substring","length","withRouter","PersonsTableHeader","isHiddenAddUserButton","isHiddenAddedUserMsg","isHiddenInputForm","isNotLimitReached","onAddUser","AddUserButton","showAddUserForm","AlertBox","lazy","Loader","PersonsTableContent","LoginSection","PersonsTableSortArea","UserInfoCard","MessageBox","isError","errorMessage","isLoading","login","hideError","load","x","y","context","connectedRef","on","snap","val","showMessage","toggleSpinner","property","column","columnSortBy","getDataDone","sortFigures","Object","isSortDescending","auth","onAuthStateChanged","Fragment","fallback","EmptyLoader","visible","Fade","in","timeout"],"mappings":"+8LAGA,MASMA,EAAUC,IAAOC,IAAV,KAEPC,EAAMF,IAAOG,OAAV,KA2BHC,EAAUJ,YAAOE,EAAPF,CAAH,KAOAK,EAAc,CACzBC,IAAKN,IAAOC,IAAT,KAYHM,aAAcP,IAAOQ,KAAT,KAeZC,MAAOT,IAAOS,MAAT,MAWMC,EAAO,CAClBC,QAASX,IAAOY,OAAT,KAePC,KAAMb,IAAOc,EAAEC,MAAOC,IAAD,CACnBC,KAAM,wBACNC,OAAQ,SACRC,IAAK,aAHDnB,CAAF,IAnGa,qBAgHNoB,EAAW,CAEtBT,QAASX,IAAOC,IAAT,IAnHc,WAkIrBoB,eAAgBrB,YAAOD,EAAPC,CAAF,IAhIK,WAiInBsB,cAAetB,YAAOD,EAAPC,CAAF,IA5HU,WA6HvBE,MACAqB,aAAcnB,EACdoB,QAASxB,IAAOyB,KAAT,KACPC,UAAW,IAAM,0BAAMC,UAAU,WAAhB,UACjBC,UAAW,IAAM,0BAAMD,UAAU,WAAhB,UACjBE,UAAW,IAAM,0BAAMF,UAAU,WAAhB,WAGNG,EAAQ,CACnBR,cAAetB,IAAOyB,KAAT,IAtIU,WAuIvBM,MAAO/B,IAAO+B,MAAT,IA1IU,UADM,WA4IrBC,aAAchC,IAAOC,IAAT,KACZgC,aAAcjC,IAAOC,IAAT,IA3IW,WA4IvBiC,aAAclC,IAAOC,IAAT,IA5IW,WA6IvBkC,aAAcnC,IAAOoC,KAAT,KAQZlC,OAGWmC,EAAS,CACpB1B,QAASX,IAAOsC,MAAT,IA3Jc,UACN,WA2JfC,aAAcvC,IAAOwC,GAAT,KASZC,QAAUzB,GAAU,kBAACqB,EAAOE,aAAR,CAAqBZ,UAAU,aAAaX,EAAM0B,WAG3DC,EAAO,CAClBC,UAAW5C,IAAOC,IAAT,KACT4C,cAAe7C,IAAO8C,GAAT,KACbC,iBAAkB/C,IAAO8C,GAAT,KAChBE,OAAQhD,IAAOyB,KAAT,IAzKW,cAEA,UADM,WAsLvBtB,OAAQH,IAAOG,OAAOY,MAAOC,IAAD,CAAciC,KAAM,SAAU,aAAa,WAA/DjD,CAAF,MAImBkD,YAAH,M,qHC5KTC,MAtBf,SAAsBC,EAAcC,EAAUC,EAAMC,GAChD,MAAO,CAACC,EAAUC,KACVL,EACAG,EAASG,SAASC,KAAKL,GAAM,SAAUM,GAC/BA,GACAJ,EAASK,YAAUD,EAAM7D,UACzBsD,EAASO,QACTJ,EAASM,iBAETC,YAAW,WACPP,EAASQ,iBACV,KACHR,EAASS,YAAWX,IACpBE,EAASM,oBAIjBN,EAASU,YAAY,+DACrBV,EAASM,kBCfrB,IAAIK,EAAkBnD,IACpB,MAAM,WAAEoD,GAAepD,EACvB,OACE,gBAAC,IAAMd,IAAP,CAAW+C,KAAK,SAASoB,GAAG,eAAeC,SAAUF,GACnD,wCASND,EAAkBI,YAJMC,IAAK,CAC3BJ,WAAYI,EAAMC,iBAGuB,KAAzBF,CAA+BJ,GAElCA,Q,iBCPf,IAAIO,EAAgB1D,IAChB,MAAMe,EAAQ4C,iBAAO,OACf,KAAEC,EAAF,QAAQC,EAAR,aAAiB1B,EAAjB,YAA+Be,EAA/B,aAA4CJ,GAAiB9C,EAC7DuC,EAAWuB,qBAAWC,KACtB1B,EAAW2B,IAAMC,QACnB,MACIrB,MAAO,KACHiB,EAAQlB,KAAKuB,MAEjBC,QAAS,KACLN,EAAQlB,KAAKuB,MAEjBE,KAAM,KACFP,EAAQlB,KAAKuB,QAGrB,CAACL,IAILQ,oBAAU,IAAMtD,EAAMuD,QAAQC,QAAS,CAACxD,IAExC,MAAM,OAAEyD,EAAF,aAAUC,EAAV,cAAwBC,EAAxB,YAAuCC,EAAvC,YAAoDC,EAApD,OAAiEC,GAAWC,YAAU,CACxFC,cAAe,CACXC,YAAa,GACbC,WAAY,IAEhBC,iBAAkBC,MAAaC,MAAM,CACjCJ,YAAaG,MAAaE,MAAM,yBAAyBC,SAAS,YAClEL,WAAYE,MACPI,IAAI,EAAG,kCACPD,SAAS,YACTE,QAAQ,qHAAgC,wBAEjDC,WACQ7B,GACAd,IACAP,EAASG,SACJgD,aAAa,SACbC,QAAQnB,EAAOQ,aACfY,KAAK,QAASC,IACX,MAAMC,GAAkBD,EAASE,SAEjC5D,EACI2D,EACAzD,EACA,CACI2D,KAAMxB,EAAOS,WACbI,MAAOb,EAAOQ,YACdpB,KAAMA,EAAKqC,aAAerC,EAAKyB,OAEnC9C,MAIZW,EAAY,wEAKxB,OACI,kBAAC,IAAM/B,aAAP,CAAoBsE,SAAUhB,GAC1B,kBAAC,IAAMxD,aAAP,KACI,kBAAC,IAAMF,MAAP,eACIuE,UAAQ,EACRY,UAAU,IACVC,UAAU,KACVC,QAAQ,qHACRC,YAAY,UACZpE,KAAK,OACLqE,IAAKvF,GACD2D,EAAc,iBAG1B,kBAAC,IAAMxD,aAAP,KACI,kBAAC,IAAMH,MAAP,eACImF,UAAU,IACVE,QAAQ,+BACRC,YAAY,WACZpE,KAAK,QACDyC,EAAc,kBAI1B,kBAAC,EAAD,QAjEmD,KAAtBF,EAAOS,YAA4C,KAAvBT,EAAOQ,cAmE5D,kBAAC,IAAMhE,aAAP,CAAoBuF,QAAS5B,GACzB,kBAAC,IAAMrE,cAAP,KACI,8CAIXsE,EAAc,GAAKC,GAChB,0BAAMlE,UAAU,gCACX6F,KAAKC,UAAU5B,EAAQ,KAAM,GAAG6B,UAAU,EAAGF,KAAKC,UAAU5B,EAAQ,KAAM,GAAG8B,OAAS,MA6B3GjD,EAAgBkD,YAAWrD,YAJHC,IAAK,CACzBI,KAAMJ,EAAMI,OAnBWpB,IAAQ,CAC/BU,YAAaZ,IACTE,EAASU,YAAYZ,KAEzBO,UAAWP,IACPE,EAASK,YAAUP,KAEvBU,qBAAsB,KAClBR,EAASQ,gBAEbb,aAAc,CAACC,EAAcC,EAAUC,EAAMC,KACzCC,EAASL,EAAaC,EAAcC,EAAUC,EAAMC,KAExDO,aAAc,KACVN,EAASM,kBAQUS,CAA6CG,IAEzDA,QClIf,IAAImD,EAAqB7G,IACrB,MAAM,sBAAE8G,EAAF,qBAAyBC,EAAzB,kBAA+CC,EAA/C,kBAAkEC,EAAlE,UAAqFC,GACvFlH,EAEEmH,EAAgB,IAClBF,EACI,kBAAC,IAAS/H,IAAV,CACImE,GAAG,gBACHpB,KAAK,SACLsE,QAASU,EAAoBC,EAAY,cAEzC,kBAAC,IAAStG,UAAV,MACA,kBAAC,IAASJ,QAAV,kBAGJ,kBAAC,IAASD,aAAV,KACI,kBAAC,IAASK,UAAV,MACA,kBAAC,IAASJ,QAAV,kBAIZ,OACI,kBAAC,IAASb,QAAV,MACMmH,GAAyB,kBAACK,EAAD,OAEzBJ,GACE,kBAAC,IAAS1G,eAAV,KACI,kBAAC,IAASK,UAAV,MACA,wEAINsG,GAAqB,kBAAC,EAAD,OAErBC,GACE,kBAAC,IAAS3G,cAAV,KACI,kBAAC,IAASO,UAAV,MACA,gEAkBpBgG,EAAqBtD,YAXGC,IAAK,CACzBsD,sBAAuBtD,EAAMsD,sBAC7BC,qBAAsBvD,EAAMuD,qBAC5BC,kBAAmBxD,EAAMwD,kBACzBC,kBAAmBzD,EAAMyD,oBAGFzE,IAAQ,CAC/B0E,UAAW,IAAM1E,EAAS4E,iBAGT7D,CAA6CsD,GAUnDA,Q,oBC9Df,MAAMQ,EAAWC,eAAK,IAAM,6DACtBC,EAASD,eAAK,IAAM,+BACpBE,EAAsBF,eAAK,IAAM,qDACjCG,EAAeH,eAAK,IAAM,sDAC1BI,EAAuBJ,eAAK,IAAM,gCAClCK,EAAeL,eAAK,IAAM,qDAC1BM,EAAaN,eAAK,IAAM,6DAgE9B,MAAMhI,EAAMiE,YAdYC,IAAK,CACzBqE,QAASrE,EAAMqE,QACfC,aAActE,EAAMsE,aACpBC,UAAWvE,EAAMuE,UACjBnE,KAAMJ,EAAMI,QAGhB,SAA4BpB,GACxB,MAAO,CACHwF,MAAO1F,GAAQE,EAASwF,YAAM1F,IAC9B2F,UAAW,IAAMzF,EAASyF,eAC1BC,KAAM,CAACC,EAAGC,KAAM5F,UC3EHH,ED2EiB8F,EC3EPE,ED2EUD,EC1E9B,CAAC5F,EAAUC,KACd4F,EAAQC,aAAaC,GAAG,SAAS,SAAUC,IACpB,IAAfA,EAAKC,MACLjG,EAASkG,YAAY,4EAErBlG,EACIK,YACI,uNAGRR,EAASO,YAIjBJ,EAASmG,eACTtG,EAAS8B,UACTkE,EAAQ3F,SAAS6F,GACb,QACA1C,IACI,MAAMvD,EAAOuD,EAAS4C,MACtB,IAAKnG,EAID,OAFAE,EAASK,YAAU,gFACnBR,EAASO,QAIb,IAAK,IAAIgG,KAAYtG,EAAM,CACvB,MAAM6F,EAAI7F,EAAKsG,GACTR,EAAI,CAACQ,GACXR,EAAE,GAAKD,EAAEnC,KACToC,EAAE,GAAKD,EAAE9C,MACT+C,EAAE,GAAKD,EAAEvE,KAETtB,EAAKsG,GAAYR,EAErB,MAAMS,EAASpG,IAAWqG,aACtBD,EACArG,EACIuG,YAAYC,YAAYC,OAAOzE,OAAOlC,GAAOG,IAAWyG,iBAAkBL,KAG1EvG,GACAE,EAASuG,YAAYE,OAAOzE,OAAOlC,KAG3CE,EAASmG,eACTtG,EAAS+B,QAEbxB,IACIC,YAAUD,GACVP,EAASO,UAIjByF,EAAQc,KAAKC,mBAAmBxF,IAC5BA,GAAQpB,EAASwF,YAAMpE,SAzD5B,IAAcvB,EAAUgG,MD8EnB9E,EA9DZ,SAAoBvD,GAChB,MAAM,UAAE+H,EAAF,KAAanE,EAAb,KAAmBsE,EAAnB,QAAyBrE,GAAY,IAAK7D,GAC1CuC,EAAWuB,qBAAWC,KACtB1B,EAAW2B,IAAMC,QACnB,MACIrB,MAAO,KACHiB,EAAQlB,KAAKuB,MAEjBC,QAAS,KACLN,EAAQlB,KAAKuB,MAEjBE,KAAM,KACFP,EAAQlB,KAAKuB,QAGrB,CAACL,IASL,OANAQ,oBAAU,KACFhC,GAAYE,GACZ2F,EAAK7F,EAAUE,IAEpB,CAACA,EAAUF,EAAU6F,IAGpB,kBAAC,IAAMmB,SAAP,KACI,kBAAC,WAAD,CAAUC,SAAUC,eAChB,kBAAClC,EAAD,MACA,kBAACM,EAAD,CAAc/D,KAAMA,IACpB,kBAAC2D,EAAD,CAAQiC,QAASzB,IACjB,kBAAC,IAAYzI,IAAb,KACI,kBAACmI,EAAD,MACA,kBAACgC,EAAA,EAAD,CAAMC,IAAI,EAAMC,QAAS,KACrB,kBAAC,IAAYpK,aAAb,KACI,kBAAC,EAAD,MACA,kBAAC,IAAYE,MAAb,KACI,kBAACiI,EAAD,MACA,kBAACF,EAAD,UAKhB,kBAACI,EAAD,WAsBDtI","file":"static/js/10.c8c31e2e.chunk.js","sourcesContent":["import styled, { createGlobalStyle } from 'styled-components';\nimport React from 'react';\n\nconst overheaderColor ='#495F75';\nconst colorUnamo = 'rgb(0, 193, 179)';\nconst colorSuccess = '#39ff14';\nconst colorSailorBlue ='#495F75';\nconst colorMint ='#C2F1DB';\nconst inputBorderColor = '#C2F1DB';\nconst circleSize = '30px';\nconst circleBackground = '#FBEA58';\nconst circleText = '#5A5D50';\nconst message = styled.div`margin 0 1rem; color: grey;`;\n\nconst btn = styled.button`\ndisplay: inline-block;\nfont-weight: 700;\ntext-align: center;\nwhite-space: nowrap;\nvertical-align: middle;\nuser-select: none;\nborder: 1px solid #C2F1DB;\npadding: .375rem 3rem;\nmargin: 0.5rem;\nfont-size: 1rem;\nline-height: 1.5;\nborder-radius: .25rem;\noverflow: visible;\ncolor:#C2F1DB;\nbackground-color:transparent;\ncursor: pointer;\ntransition: color .3s ease-in-out,background-color .3s ease-in-out,border-color .3s ease-in-out,box-shadow .3s ease-in-out;\n&:hover, &:focus{\n  color: #495F75;\n  outline:none;\n  background-color: #C2F1DB;\n  border-color: transparent;\n}\n\n`;\n\nconst btn_dis = styled(btn)`\nopacity: 0.5;\ncursor: default;\n&:hover{color:gold;background-color:transparent;border-color:gold;}\n`;\n\n\nexport const Application = {\n  App: styled.div`\n  overflow-y: auto;\n  display: flex;\n  min-height: 100%;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;\n  padding-top: 20vh;\n  width: 100%;\n  max-width:800px;\n  margin: 0 auto;\n`,\n  tableWrapper: styled.main`\n  width: 96%;\n  border-radius: 0.25rem;\n  border: 1px solid #3c5063;\n  box-shadow: 0 1px 1px rgba(0,0,0,0.15), \n              0 2px 2px rgba(0,0,0,0.15), \n              0 4px 4px rgba(0,0,0,0.15), \n              0 8px 8px rgba(0,0,0,0.15);\n  font-size: 1rem;\n  line-height:1.5;\n  font-family: 'Lato', sans-serif;\n  margin: 1vw 1vw;\n  @media(max-width:569px){ font-size: calc( 12px + 4 * ((100vw - 320px) / 249))}\n\n`,\n  table: styled.table`\nwidth:100%;\noverflow-y: hidden;\noverflow-x: auto;\nbox-shadow: inset 0 1px 1px rgba(200,200,200,0.11);\n\n@media(max-width: 300px){display:block};\n\n@media(min-width: 569px){ overflow-y: visible;}`,\n};\n\nexport const Logo = {\n  wrapper: styled.header`\ndisplay: flex;\nwidth: 100%;\nflex-direction: row;\njustify-content: space-evenly;\nalign-items: center;\npadding: 4vh 0;\n\n@media(max-width: 568px) {\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n\n`,\n  page: styled.a.attrs((props) => ({\n    href: 'https://unamo.com/pl/',\n    target: \"_blank\",\n    rel: 'noopener',\n  }))`\n    font-size: 1.5rem;\n    color: ${colorUnamo};\n    font-family: 'Lato', sans-serif;\n    `,\n\n};\n\n\nexport const Overhead = {\n\n  wrapper: styled.div`\n  display: flex;\n  min-height: 4.2rem;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  background-color: ${overheaderColor};\n  border: 0;\n\n  @media(min-width: 569px){\n      flex-direction: row;\n  }\n  \n`,\n\n  successMessage: styled(message)`color: ${colorSuccess}`,\n  dangerMessage: styled(message)`color:${circleBackground}`,\n  btn,\n  btn_disabled: btn_dis,\n  btnText: styled.span`margin-left: 1rem`,\n  iconCheck: () => <span className=\"IcoMoon\">&#xe900;</span>,\n  iconCross: () => <span className=\"IcoMoon\">&#xe902;</span>,\n  iconLimit: () => <span className=\"IcoMoon\">&#xe901;</span>,\n};\n\nexport const Input = {\n  dangerMessage: styled.span`letter-spacing: 0.08rem; font-weight:700; cursor: pointer;color:${circleBackground}`,\n  input: styled.input`border:0;cursor:pointer; overflow: visible; font-size: 16px; padding: 0.3rem;background-color:${colorMint}; color:${colorSailorBlue}`,\n  resetWrapper: styled.div`display:inline`,\n  innerWrapper: styled.div`display:inline; padding: 0.25rem; margin:0.5rem; border-radius:0.25rem; border: 1px solid ${inputBorderColor};`,\n  inputWrapper: styled.div`display:inline; padding: 0.25rem; margin:0.5rem; border-radius:0.25rem; border: 1px solid ${inputBorderColor};`,\n  outerWrapper: styled.form`\n  display:flex; \n  flex-direction:column; \n  padding:0.5rem; \n  align-items:center; \n  flex-wrap:wrap;\n  @media(min-width: 569px){ flex-direction: row; justify-content:center;}  \n  `,\n  btn,\n};\n\nexport const Header = {\n  wrapper: styled.thead`background-color:${colorSailorBlue}; color:${colorMint}`,\n  sectionStyle: styled.th`\ncursor: pointer;\ntext-align: left;\n@media(max-width: 568px) {padding 0.75rem 0}\n@media(min-width: 569px) {padding 0.75rem}\n\nvertical-align:top;\nborder-top: 1px solid;\n`,\n  section: (props) => <Header.sectionStyle className=\"icon-Sort\">{props.children}</Header.sectionStyle>,\n};\n\nexport const Rows = {\n  emailCell: styled.div`display:flex; justify-content: space-between; align-items:center`,\n  middleAligned: styled.td`vertical-align: middle; padding:0.75rem; border-top: 1px solid`,\n  middleAlignedTop: styled.td`vertical-align: top; padding:0.75rem; border-top: 1px solid`,\n  circle: styled.span`\n  text-shadow: 0 -.03rem .03rem;\n  font-weight: 100; \n  width:${circleSize}; \n  height:${circleSize}; \n  color:${circleText}; \n  border: 1px solid; \n  border-radius:50%; \n  display:flex; \n  justify-content:center; \n  align-items: center; \n  background-color:${circleBackground};\n  @media(max-width:569px){ width: calc( 20px + 10 * ((100vw - 320px) / 249)); height:calc( 20px + 10 * ((100vw - 320px) / 249)); }\n  `,\n  button: styled.button.attrs((props) => ({ type: 'button', 'aria-label':'delete' }))`background: transparent; border-radius:50%; border:none;`,\n};\n\n\nexport const GlobalStyle = createGlobalStyle`\nbody {color: gold; \n}; \n* {box-sizing: border-box}\n\n*{@import url('./styles/App.css');\n\n}\n\n\n\nhtml {\n\n  font-size: 12px;\n  \n  @media \n    (max-width: 330px){ font-size:10px;}\n  @media \n    (min-width: 331px)and (max-width: 568px) { font-size:12px;}\n     \n  @media \n    (min-width: 569px){ font-size:16px;}\n  \n \n\n}\n`;\n\n\n","import { hideAddedUserMessage, submitUser, showError, showWarning, toggleSubmit } from '../actions';\r\n\r\nfunction submitFigure(notDuplicate, redirect, data, firebase) {\r\n    return (dispatch, getState) => {\r\n        if (notDuplicate) {\r\n            firebase.itemsRef.push(data, function (error) {\r\n                if (error) {\r\n                    dispatch(showError(error.message));\r\n                    redirect.error();\r\n                    dispatch(toggleSubmit());\r\n                } else {\r\n                    setTimeout(function () {\r\n                        dispatch(hideAddedUserMessage());\r\n                    }, 3000);\r\n                    dispatch(submitUser(data));\r\n                    dispatch(toggleSubmit());\r\n                }\r\n            });\r\n        } else {\r\n            dispatch(showWarning('Użytkownik o tym e-mailu jest już zarejestrowany'));\r\n            dispatch(toggleSubmit());\r\n        }\r\n    };\r\n}\r\nexport default submitFigure;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Input } from \"../../styles/style\";\r\n\r\nlet AddPersonButton = props => {\r\n  const { isDisabled } = props;\r\n  return (\r\n    <Input.btn type=\"submit\" id=\"SubmitButton\" disabled={isDisabled}>\r\n      <span>Submit</span>\r\n    </Input.btn>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  isDisabled: state.submitDisabled,\r\n});\r\n\r\nAddPersonButton = connect(mapStateToProps, null)(AddPersonButton);\r\n\r\nexport default AddPersonButton;\r\n\r\nAddPersonButton.propTypes = {\r\n  isDisabled: PropTypes.bool,\r\n};\r\n","import React, { useEffect, useRef, useContext } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router';\r\nimport { showError, hideAddedUserMessage, showWarning, toggleSubmit } from '../../js/REDUX/actions';\r\nimport * as ROUTES from '../../js/ROUTES/routes';\r\nimport { useFormik } from 'formik';\r\nimport { Input } from '../../styles/style';\r\nimport submitFigure from '../../js/REDUX/THUNKS/submitFigure';\r\nimport AddPersonButton from './AddPersonButton';\r\nimport { FirebaseContext } from '../../contexts/firebaseContext';\r\nimport * as Yup from 'yup';\r\n\r\nlet AddPersonForm = props => {\r\n    const input = useRef(null);\r\n    const { user, history, submitFigure, showWarning, toggleSubmit } = props;\r\n    const firebase = useContext(FirebaseContext);\r\n    const redirect = React.useMemo(\r\n        () => ({\r\n            error: () => {\r\n                history.push(ROUTES.ERROR);\r\n            },\r\n            loading: () => {\r\n                history.push(ROUTES.CONNECT);\r\n            },\r\n            home: () => {\r\n                history.push(ROUTES.HOME);\r\n            },\r\n        }),\r\n        [history],\r\n    );\r\n\r\n    const isResetFieldsHidden = () => !!(values.personName === '' && values.personEmail === '');\r\n    useEffect(() => input.current.focus(), [input]);\r\n\r\n    const { values, handleSubmit, getFieldProps, handleReset, submitCount, errors } = useFormik({\r\n        initialValues: {\r\n            personEmail: '',\r\n            personName: '',\r\n        },\r\n        validationSchema: Yup.object().shape({\r\n            personEmail: Yup.string().email('Invalid email address').required('Required'),\r\n            personName: Yup.string()\r\n                .min(4, 'Must be more than 3 characters')\r\n                .required('Required')\r\n                .matches('[a-zA-ZąĄććęęłŁńŃóÓśŚżŻŹŹ ]+', 'Invalid characters'),\r\n        }),\r\n        onSubmit() {\r\n            if (user) {\r\n                toggleSubmit();\r\n                firebase.itemsRef\r\n                    .orderByChild('email')\r\n                    .equalTo(values.personEmail)\r\n                    .once('value', snapshot => {\r\n                        const isNotDuplicate = !snapshot.exists();\r\n\r\n                        submitFigure(\r\n                            isNotDuplicate,\r\n                            redirect,\r\n                            {\r\n                                name: values.personName,\r\n                                email: values.personEmail,\r\n                                user: user.displayName || user.email,\r\n                            },\r\n                            firebase,\r\n                        );\r\n                    });\r\n            } else {\r\n                showWarning('Tylko zalogowani użytkownicy mogą dodawać postacie');\r\n            }\r\n        },\r\n    });\r\n\r\n    return (\r\n        <Input.outerWrapper onSubmit={handleSubmit}>\r\n            <Input.innerWrapper>\r\n                <Input.input\r\n                    required\r\n                    minLength=\"2\"\r\n                    maxLength=\"20\"\r\n                    pattern=\"[a-zA-ZąĄććęęłŁńŃóÓśŚżŻŹŹ ]+\"\r\n                    placeholder=\"Name...\"\r\n                    type=\"text\"\r\n                    ref={input}\r\n                    {...getFieldProps('personName')}\r\n                />\r\n            </Input.innerWrapper>\r\n            <Input.inputWrapper>\r\n                <Input.input\r\n                    minLength=\"2\"\r\n                    pattern=\"[^@\\s]+@[^@\\s]+\\.[^@\\s]+\"\r\n                    placeholder=\"Email...\"\r\n                    type=\"text\"\r\n                    {...getFieldProps('personEmail')}\r\n                />\r\n            </Input.inputWrapper>\r\n\r\n            <AddPersonButton />\r\n            {!isResetFieldsHidden() && (\r\n                <Input.resetWrapper onClick={handleReset}>\r\n                    <Input.dangerMessage>\r\n                        <u> Reset Fields</u>\r\n                    </Input.dangerMessage>\r\n                </Input.resetWrapper>\r\n            )}\r\n            {submitCount > 0 && errors && (\r\n                <span className=\"AddPersonForm__error-message\">\r\n                    {JSON.stringify(errors, null, 2).substring(1, JSON.stringify(errors, null, 2).length - 1)}\r\n                </span>\r\n            )}\r\n        </Input.outerWrapper>\r\n    );\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    showWarning: data => {\r\n        dispatch(showWarning(data));\r\n    },\r\n    showError: data => {\r\n        dispatch(showError(data));\r\n    },\r\n    hideAddedUserMessage: () => {\r\n        dispatch(hideAddedUserMessage());\r\n    },\r\n    submitFigure: (notDuplicate, redirect, data, firebase) => {\r\n        dispatch(submitFigure(notDuplicate, redirect, data, firebase));\r\n    },\r\n    toggleSubmit: () => {\r\n        dispatch(toggleSubmit());\r\n    },\r\n});\r\n\r\nconst mapStateToProps = state => ({\r\n    user: state.user,\r\n});\r\n\r\nAddPersonForm = withRouter(connect(mapStateToProps, mapDispatchToProps)(AddPersonForm));\r\n\r\nexport default AddPersonForm;\r\n\r\nAddPersonForm.propTypes = {\r\n    onSubmit: PropTypes.func,\r\n    submitFigure: PropTypes.func,\r\n    showWarning: PropTypes.func,\r\n    toggleSubmit: PropTypes.func,\r\n    user: PropTypes.object,\r\n    history: PropTypes.object,\r\n    hideAddedUserMessage: PropTypes.func,\r\n};\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n//import AddPersonForm from './AddPersonForm';\r\nimport AddPersonForm from './AddPersonForm';\r\nimport { showAddUserForm } from '../../js/REDUX/actions';\r\nimport { Overhead } from '../../styles/style';\r\n\r\nlet PersonsTableHeader = props => {\r\n    const { isHiddenAddUserButton, isHiddenAddedUserMsg, isHiddenInputForm, isNotLimitReached, onAddUser } =\r\n        props;\r\n\r\n    const AddUserButton = () =>\r\n        isNotLimitReached ? (\r\n            <Overhead.btn\r\n                id=\"AddUserButton\"\r\n                type=\"button\"\r\n                onClick={isNotLimitReached ? onAddUser : function () {}}\r\n            >\r\n                <Overhead.iconCross />\r\n                <Overhead.btnText>Add User</Overhead.btnText>\r\n            </Overhead.btn>\r\n        ) : (\r\n            <Overhead.btn_disabled>\r\n                <Overhead.iconCross />\r\n                <Overhead.btnText>Add User</Overhead.btnText>\r\n            </Overhead.btn_disabled>\r\n        );\r\n\r\n    return (\r\n        <Overhead.wrapper>\r\n            {!isHiddenAddUserButton && <AddUserButton />}\r\n\r\n            {!isHiddenAddedUserMsg && (\r\n                <Overhead.successMessage>\r\n                    <Overhead.iconCheck />\r\n                    <span> You have succesfully added an user </span>\r\n                </Overhead.successMessage>\r\n            )}\r\n\r\n            {!isHiddenInputForm && <AddPersonForm />}\r\n\r\n            {!isNotLimitReached && (\r\n                <Overhead.dangerMessage>\r\n                    <Overhead.iconLimit />\r\n                    <span> You have reached the limit</span>\r\n                </Overhead.dangerMessage>\r\n            )}\r\n        </Overhead.wrapper>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n    isHiddenAddUserButton: state.isHiddenAddUserButton,\r\n    isHiddenAddedUserMsg: state.isHiddenAddedUserMsg,\r\n    isHiddenInputForm: state.isHiddenInputForm,\r\n    isNotLimitReached: state.isNotLimitReached,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    onAddUser: () => dispatch(showAddUserForm()),\r\n});\r\n\r\nPersonsTableHeader = connect(mapStateToProps, mapDispatchToProps)(PersonsTableHeader);\r\n\r\nPersonsTableHeader.propTypes = {\r\n    isHiddenAddUserButton: PropTypes.bool,\r\n    isHiddenAddUserMsg: PropTypes.bool,\r\n    isHiddenInputForm: PropTypes.bool,\r\n    isNotLimitReached: PropTypes.bool,\r\n    onAddUser: PropTypes.func,\r\n};\r\n\r\nexport default PersonsTableHeader;\r\n","import React, { useEffect, lazy, Suspense, useContext } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { login, hideError } from '../js/REDUX/actions';\r\nimport { Fade } from '@material-ui/core';\r\nimport PersonsTableHeader from './PersonsTable/PersonsTableHeader';\r\nimport { load } from '../js/REDUX/THUNKS/loadData';\r\nimport { FirebaseContext } from '../contexts/firebaseContext';\r\nimport { Application } from '../styles/style';\r\nimport EmptyLoader from './EmptyLoader';\r\nimport * as ROUTES from '../js/ROUTES/routes';\r\n\r\nconst AlertBox = lazy(() => import('./AlertBox'));\r\nconst Loader = lazy(() => import('./Loader'));\r\nconst PersonsTableContent = lazy(() => import('./PersonsTable/PersonsTableContent'));\r\nconst LoginSection = lazy(() => import('./LoginSection'));\r\nconst PersonsTableSortArea = lazy(() => import('./PersonsTable/PersonsTableSortArea'));\r\nconst UserInfoCard = lazy(() => import('./UserInfoCard'));\r\nconst MessageBox = lazy(() => import('./MessageBox'));\r\n\r\nfunction PrepareApp(props) {\r\n    const { isLoading, user, load, history } = { ...props };\r\n    const firebase = useContext(FirebaseContext);\r\n    const redirect = React.useMemo(\r\n        () => ({\r\n            error: () => {\r\n                history.push(ROUTES.ERROR);\r\n            },\r\n            loading: () => {\r\n                history.push(ROUTES.CONNECT);\r\n            },\r\n            home: () => {\r\n                history.push(ROUTES.HOME);\r\n            },\r\n        }),\r\n        [history],\r\n    );\r\n\r\n    useEffect(() => {\r\n        if (redirect && firebase) {\r\n            load(redirect, firebase);\r\n        }\r\n    }, [firebase, redirect, load]);\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Suspense fallback={EmptyLoader()}>\r\n                <AlertBox />\r\n                <UserInfoCard user={user} />\r\n                <Loader visible={isLoading} />\r\n                <Application.App>\r\n                    <LoginSection />\r\n                    <Fade in={true} timeout={2000}>\r\n                        <Application.tableWrapper>\r\n                            <PersonsTableHeader />\r\n                            <Application.table>\r\n                                <PersonsTableSortArea />\r\n                                <PersonsTableContent />\r\n                            </Application.table>\r\n                        </Application.tableWrapper>\r\n                    </Fade>\r\n                </Application.App>\r\n                <MessageBox />\r\n            </Suspense>\r\n        </React.Fragment>\r\n    );\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    isError: state.isError,\r\n    errorMessage: state.errorMessage,\r\n    isLoading: state.isLoading,\r\n    user: state.user,\r\n});\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        login: data => dispatch(login(data)),\r\n        hideError: () => dispatch(hideError()),\r\n        load: (x, y) => dispatch(load(x, y)),\r\n    };\r\n}\r\nconst App = connect(mapStateToProps, mapDispatchToProps)(PrepareApp);\r\n\r\nexport default App;\r\n","import { getDataDone, login, showError, toggleSpinner, showMessage } from '../actions';\r\nimport { sortFigures } from '../../FUNCTIONS/functions';\r\n\r\nexport function load(redirect, context) {\r\n    return (dispatch, getState) => {\r\n        context.connectedRef.on('value', function (snap) {\r\n            if (snap.val() === true) {\r\n                dispatch(showMessage('Ustanowiono lub przywrócono połączenie z bazą danych'));\r\n            } else {\r\n                dispatch(\r\n                    showError(\r\n                        'W tej chwili nie masz połączenia z bazą. Wskazane jest abyś nie wykonywał operacji zapisu i odczytu, gdyż mają one wyłacznie lokalny zasięg i nie zmieniają bazy',\r\n                    ),\r\n                );\r\n                redirect.error();\r\n            }\r\n        });\r\n\r\n        dispatch(toggleSpinner());\r\n        redirect.loading(); // ale nadal przy pierwszym właczeniu bez internetu kręci się kręcioł bez końca może jednak trza zrobić tak: jeżeli zaskoczy snapshot jak poniżej to gasi settimeouta który w innej sytuacji wybije error po czasie\r\n        context.itemsRef.on(\r\n            'value',\r\n            snapshot => {\r\n                const data = snapshot.val();\r\n                if (!data) {\r\n                    //prevents reading empty database\r\n                    dispatch(showError('Baza jest pusta lub wystąpił problem z połączeniem'));\r\n                    redirect.error();\r\n                    return;\r\n                }\r\n\r\n                for (let property in data) {\r\n                    const x = data[property];\r\n                    const y = [property];\r\n                    y[1] = x.name;\r\n                    y[2] = x.email;\r\n                    y[3] = x.user;\r\n\r\n                    data[property] = y;\r\n                }\r\n                const column = getState().columnSortBy;\r\n                if (column) {\r\n                    dispatch(\r\n                        getDataDone(sortFigures(Object.values(data), getState().isSortDescending, column)),\r\n                    );\r\n                } else {\r\n                    if (data) {\r\n                        dispatch(getDataDone(Object.values(data)));\r\n                    } /*else{dispatch(getDataDone(null));} */ //if by mistake all is removed sending null is a sort of service entry\r\n                }\r\n                dispatch(toggleSpinner());\r\n                redirect.home();\r\n            },\r\n            error => {\r\n                showError(error);\r\n                redirect.error();\r\n            },\r\n        );\r\n\r\n        context.auth.onAuthStateChanged(user => {\r\n            user && dispatch(login(user));\r\n        });\r\n    };\r\n}\r\n"],"sourceRoot":""}